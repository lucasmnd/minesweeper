# 3. Game State

In this section, we define a way to uniquely describe the state of a game of Minesweeper and derive its properties.

## 3.1 Definition

We define the Game State $S$ as the set of all positions paired with their currently observed status:

$$S = \{ (p, O(p)) \mid p \in D \}$$

This definition uniquely identifies any possible situation in the game from the player's perspective.

## 3.2 Derived Properties

While the state $S$ fully describes the current situation of the game, specific subsets or metrics derived from this data will be useful later. We define these properties as functions of $S$.

### 3.2.1 Revealed Tiles

$S$ can be used to determine the elements in $R$ through the function $R(S)$:

$$ R(S) = \{ p \in D \mid \exists v \neq u \text{ such that } (p, v) \in S\} $$

### 3.2.2 Boundary
We define the Boundary, denoted by $B(S)$, as the set of revealed tiles that are adjacent to at least one unknown tile:

$$ B(S) = \{ p \in R(S) \mid \exists q \in V(p) \text{ such that } (q, u) \in S \}$$

### 3.2.3 Remaining Hidden Safe Tiles

Hidden Safe Tiles are unrevealed to the player and do not conceal a mine. Therefore, the number of Remaining Hidden Safe Tiles $r(S)$ can be calculated as:

$$ r(S) = |D| - N_{total} - |R(S)|$$

## 3.3 Game Termination

The termination conditions can be defined entirely based on the state $S$. If none of the conditions are met, the game is in an unfinished state.

### 3.3.1 Loss Condition

A loss occurs if the state contains any revealed mine. Formally, the game enters a loss state if:

$$\exists (p, v) \in S \text{ such that } v = m$$

In this scenario, the game terminates immediately as a failure.

### 3.3.2 Victory Condition

The game is in a victory state when all safe tiles are revealed and no mines have been triggered. This corresponds to a state where:

$$r(S) = 0 \quad \land \quad \nexists (p, v) \in S \text{ such that } v = m$$

## 3.4 Game Status Evaluation
To evaluate the game's status, we first define the State Space, denoted by $\mathcal{S}$, as the set of all possible game states. We then define the evaluation function $E:\mathcal{S} \to \{\text{Victory}, \text{Loss}, \text{Unfinished}\}$ based on the previous conditions:

$$
E(S) = \begin{cases} 
    \text{Loss} & \text{if } \exists (p, m) \in S \\
    \text{Victory} & \text{if } r(S) = 0 \land \nexists (p, m) \in S \\
    \text{Unfinished} & \text{otherwise}
\end{cases}
$$